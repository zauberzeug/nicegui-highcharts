import{g as t}from"./index-B1MHyEgd.js";function e(t,e){return e.forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in t)){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(t)}var r,i={exports:{}};var o,n=r?i.exports:(r=1,o="undefined"==typeof window?i.exports:window,i.exports=((t,e,r,i)=>(()=>{var o={512:t=>{t.exports=i},608:t=>{t.exports=r},620:t=>{t.exports=e},944:e=>{e.exports=t}},n={};function s(t){var e=n[t];if(void 0!==e)return e.exports;var r=n[t]={exports:{}};return o[t](r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var d={};s.d(d,{default:()=>N});var a=s(944),h=s.n(a),l=s(620),p=s.n(l),g=s(608),f=s.n(g);let{parse:c}=p(),{charts:y}=h(),{Element3D:x}=f().getRendererType().prototype,{merge:u}=h(),w=class extends x{constructor(){super(...arguments),this.mainParts=["top","bottom"],this.parts=["top","bottom","frontUpper","backUpper","frontLower","backLower","rightUpper","rightLower"],this.sideGroups=["upperGroup","lowerGroup"],this.sideParts={upperGroup:["frontUpper","backUpper","rightUpper"],lowerGroup:["frontLower","backLower","rightLower"]},this.pathType="funnel3d"}opacitySetter(t){let e=parseFloat(t),r=this.parts,i=y[this.renderer.chartIndex],o="group-opacity-"+e+"-"+i.index;if(this.parts=this.mainParts,this.singleSetterForParts("opacity",e),this.parts=r,!i.renderer.filterId){for(let t of(i.renderer.definition({tagName:"filter",attributes:{id:o},children:[{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"table",tableValues:"0 "+e}}]}]}),this.sideGroups))this[t].attr({filter:"url(#"+o+")"});if(this.renderer.styledMode)for(let t of(i.renderer.definition({tagName:"style",textContent:".highcharts-"+o+" {filter:url(#"+o+")}"}),this.sideGroups))this[t].addClass("highcharts-"+o)}return this}fillSetter(t){let e=c(t),r=e.rgba[3],i={top:c(t).brighten(.1).get(),bottom:c(t).brighten(-.2).get()};if(r<1?(e.rgba[3]=1,e=e.get("rgb"),this.attr({opacity:r})):e=t,e.linearGradient||e.radialGradient||!this.gradientForSides||(e={linearGradient:{x1:0,x2:1,y1:1,y2:1},stops:[[0,c(t).brighten(-.2).get()],[.5,t],[1,c(t).brighten(-.2).get()]]}),e.linearGradient)for(let t of this.sideGroups){let r=this[t].gradientBox,o=e.linearGradient,n=u(e,{linearGradient:{x1:r.x+o.x1*r.width,y1:r.y+o.y1*r.height,x2:r.x+o.x2*r.width,y2:r.y+o.y2*r.height}});for(let e of this.sideParts[t])i[e]=n}else if(u(!0,i,{frontUpper:e,backUpper:e,rightUpper:e,frontLower:e,backLower:e,rightLower:e}),e.radialGradient)for(let t of this.sideGroups){let e=this[t].gradientBox,r=e.x+e.width/2,i=e.y+e.height/2,o=Math.min(e.width,e.height);for(let e of this.sideParts[t])this[e].setRadialReference([r,i,o])}if(this.singleSetterForParts("fill",null,i),this.color=this.fill=t,e.linearGradient)for(let t of[this.frontLower,this.frontUpper]){let e=t.element,r=e&&this.renderer.gradients[e.gradient];r&&"userSpaceOnUse"!==r.attr("gradientUnits")&&r.attr({gradientUnits:"userSpaceOnUse"})}return this}adjustForGradient(){let t;for(let e of this.sideGroups){let r={x:Number.MAX_VALUE,y:Number.MAX_VALUE},i={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE};for(let o of this.sideParts[e])t=this[o].getBBox(!0),r={x:Math.min(r.x,t.x),y:Math.min(r.y,t.y)},i={x:Math.max(i.x,t.x+t.width),y:Math.max(i.y,t.y+t.height)};this[e].gradientBox={x:r.x,width:i.x-r.x,y:r.y,height:i.y-r.y}}}zIndexSetter(){return this.finishedOnAdd&&this.adjustForGradient(),this.renderer.Element.prototype.zIndexSetter.apply(this,arguments)}onAdd(){this.adjustForGradient(),this.finishedOnAdd=!0}},{charts:m}=h(),{error:b,extend:v,merge:L}=h();function z(t){let e=this.element3d("funnel3d",t),r=this.styledMode,i={"stroke-width":1,stroke:"none"};for(let t of(e.upperGroup=this.g("funnel3d-upper-group").attr({zIndex:e.frontUpper.zIndex}).add(e),[e.frontUpper,e.backUpper,e.rightUpper]))r||t.attr(i),t.add(e.upperGroup);for(let t of(e.lowerGroup=this.g("funnel3d-lower-group").attr({zIndex:e.frontLower.zIndex}).add(e),[e.frontLower,e.backLower,e.rightLower]))r||t.attr(i),t.add(e.lowerGroup);return e.gradientForSides=t.gradientForSides,e}function C(t){this.getCylinderEnd||b("A required Highcharts module is missing: cylinder.js",!0,m[this.chartIndex]);let e,r=m[this.chartIndex],i=t.alphaCorrection=90-Math.abs(r.options.chart.options3d.alpha%180-90),o=this.cuboidPath.call(this,L(t,{depth:t.width,width:(t.width+t.bottom.width)/2})),n=o.isTop,s=!o.isFront,d=!!t.middle,a=this.getCylinderEnd(r,L(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:i})),h=t.bottom.width,l=L(t,{width:h,x:t.x-h/2,z:t.z-h/2,alphaCorrection:i}),p=this.getCylinderEnd(r,l,!0),g=h,f=l,c=p,y=p;d&&(g=t.middle.width,f=L(t,{y:t.y+t.middle.fraction*t.height,width:g,x:t.x-g/2,z:t.z-g/2}),c=this.getCylinderEnd(r,f,!1),y=this.getCylinderEnd(r,f,!1));let x={top:a,bottom:p,frontUpper:this.getCylinderFront(a,c),zIndexes:{group:o.zIndexes.group,top:3*(0===n),bottom:3*(1===n),frontUpper:s?2:1,backUpper:s?1:2,rightUpper:s?2:1}};return x.backUpper=this.getCylinderBack(a,c),e=Math.min(g,t.width)/Math.max(g,t.width)!=1,x.rightUpper=this.getCylinderFront(this.getCylinderEnd(r,L(t,{x:t.x-t.width/2,z:t.z-t.width/2,alphaCorrection:e?-i:0}),!1),this.getCylinderEnd(r,L(f,{alphaCorrection:e?-i:0}),!d)),d&&(e=Math.min(g,h)/Math.max(g,h)!=1,L(!0,x,{frontLower:this.getCylinderFront(y,p),backLower:this.getCylinderBack(y,p),rightLower:this.getCylinderFront(this.getCylinderEnd(r,L(l,{alphaCorrection:e?-i:0}),!0),this.getCylinderEnd(r,L(f,{alphaCorrection:e?-i:0}),!1)),zIndexes:{frontLower:s?2:1,backLower:s?1:2,rightLower:s?1:2}})),x}var A=s(512),U=s.n(A);let{seriesTypes:{column:k}}=U(),{extend:G}=h();class M extends k.prototype.pointClass{}G(M.prototype,{shapeType:"funnel3d"});let{deg2rad:F}=h(),{pick:E}=h(),{noop:I}=h(),{perspective:P}={perspective:function(t,e,r,i){let o=e.options.chart.options3d,n=E(i,!!r&&e.inverted),s={x:e.plotWidth/2,y:e.plotHeight/2,z:o.depth/2,vd:E(o.depth,1)*E(o.viewDistance,0)},d=e.scale3d||1,a=F*o.beta*(n?-1:1),h=F*o.alpha*(n?-1:1),l=Math.cos(h),p=Math.cos(-a),g=Math.sin(h),f=Math.sin(-a);return r||(s.x+=e.plotLeft,s.y+=e.plotTop),t.map(function(t){var e,r,i;let o=(e=(n?t.y:t.x)-s.x,r=(n?t.x:t.y)-s.y,i=(t.z||0)-s.z,{x:p*e-f*i,y:-g*f*e+l*r-p*g*i,z:l*f*e+g*r+l*p*i}),a=function(t,e,r){let i=r>0&&r<Number.POSITIVE_INFINITY?r/(t.z+e.z+r):1;return{x:t.x*i,y:t.y*i}}(o,s,s.vd);return a.x=a.x*d+s.x,a.y=a.y*d+s.y,a.z=o.z*d+s.z,{x:n?a.y:a.x,y:n?a.x:a.y,z:a.z}})}},{series:S,seriesTypes:{column:O}}=U(),{extend:_,merge:T,pick:W,relativeLength:j}=h();class B extends O{alignDataLabel(t,e,r){let i=t.dlBoxRaw,o=this.chart.inverted,n=t.plotY>W(this.translatedThreshold,this.yAxis.len),s=W(r.inside,!!this.options.stacking),d={x:i.x,y:i.y,height:0};r.align=W(r.align,!o||s?"center":n?"right":"left"),r.verticalAlign=W(r.verticalAlign,o||s?"middle":n?"top":"bottom"),"top"!==r.verticalAlign&&(d.y+=i.bottom/("bottom"===r.verticalAlign?1:2)),d.width=this.getWidthAt(d.y),this.options.reversed&&(d.width=i.fullWidth-d.width),s?d.x-=d.width/2:"left"===r.align?(r.align="right",d.x-=1.5*d.width):"right"===r.align?(r.align="left",d.x+=d.width/2):d.x-=d.width/2,t.dlBox=d,O.prototype.alignDataLabel.apply(this,arguments)}bindAxes(){S.prototype.bindAxes.apply(this,arguments),_(this.xAxis.options,{gridLineWidth:0,lineWidth:0,title:void 0,tickPositions:[]}),T(!0,this.yAxis.options,{gridLineWidth:0,title:void 0,labels:{enabled:!1}})}translate(){S.prototype.translate.apply(this,arguments);let t,e,r,i,o,n,s,d,a,h=this.chart,l=this.options,p=l.reversed,g=l.ignoreHiddenPoint,f=h.plotWidth,c=h.plotHeight,y=l.center,x=j(y[0],f),u=j(y[1],c),w=j(l.width,f),m=j(l.height,c),b=j(l.neckWidth,f),v=j(l.neckHeight,c),L=u-m/2+m-v,z=this.points,C=0,A=0;for(let t of(this.getWidthAt=e=function(t){return t>L||m===v?b:b+(w-b)*(1-(t-(u-m/2))/(m-v))},this.center=[x,u,m],this.centerX=x,z))g&&!1===t.visible||(C+=t.y);for(let f of z)s=null,r=C?f.y/C:0,n=(o=u-m/2+A*m)+r*m,t=e(o),d=n-o,(a={gradientForSides:W(f.options.gradientForSides,l.gradientForSides),x:x,y:o,height:d,width:t,z:1,top:{width:t}}).bottom={fraction:r,width:t=e(n)},o>=L?a.isCylinder=!0:n>L&&(s=n,t=e(L),n=L,a.bottom.width=t,a.middle={fraction:d?(L-o)/d:0,width:t}),p&&(a.y=o=u+m/2-(A+r)*m,a.middle&&(a.middle.fraction=1-(d?a.middle.fraction:0)),t=a.width,a.width=a.bottom.width,a.bottom.width=t),f.shapeArgs=_(f.shapeArgs,a),f.percentage=100*r,f.plotX=x,f.plotY=p?u+m/2-(A+r/2)*m:(o+(s||n))/2,i=P([{x:x,y:f.plotY,z:p?-(w-e(f.plotY))/2:-e(f.plotY)/2}],h,!0)[0],f.tooltipPos=[i.x,i.y],f.dlBoxRaw={x:x,width:e(f.plotY),y:o,bottom:a.height||0,fullWidth:w},g&&!1===f.visible||(A+=r)}}B.compose=function(t){let e=t.prototype;e.funnel3d||(e.Element3D.types.funnel3d=w,v(e,{funnel3d:z,funnel3dPath:C}))},B.defaultOptions=T(O.defaultOptions,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,gradientForSides:!0,animation:!1,edgeWidth:0,colorByPoint:!0,showInLegend:!1,dataLabels:{align:"right",crop:!1,inside:!1,overflow:"allow"}}),_(B.prototype,{pointClass:M,translate3dShapes:I}),U().registerSeriesType("funnel3d",B),B.compose(f().getRendererType());let N=h();return d.default})())(o._Highcharts,o._Highcharts.Color,o._Highcharts.RendererRegistry,o._Highcharts.SeriesRegistry)),s=e({__proto__:null,default:t(n)},[n]);export{s as f};
//# sourceMappingURL=funnel3d-BhQrm982.js.map

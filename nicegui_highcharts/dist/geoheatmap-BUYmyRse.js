import{g as t}from"./index-B1MHyEgd.js";function e(t,e){return e.forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(i){if("default"!==i&&!(i in t)){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}})}),Object.freeze(t)}var i,o={exports:{}};var a,r=i?o.exports:(i=1,a="undefined"==typeof window?o.exports:window,o.exports=((t,e)=>(()=>{var i={512:t=>{t.exports=e},944:e=>{e.exports=t}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;var r=o[t]={exports:{}};return i[t](r,r.exports,a),r.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};a.d(r,{default:()=>A});var n=a(944),s=a.n(n),l=a(512),p=a.n(l);let{map:{prototype:{pointClass:h}}}=p().seriesTypes,{isNumber:d}=s(),{doc:c}=s(),{defined:g,pick:u}=s(),{animObject:y,stop:m}=s(),{noop:f}=s(),{colorFromPoint:x,getContext:b}={colorFromPoint:function(t,e){let i=e.series.colorAxis;if(i){let o=i.toColor(t||0,e).split(")")[0].split("(")[1].split(",").map(t=>u(parseFloat(t),parseInt(t,10)));return o[3]=255*u(o[3],1),g(t)&&e.visible||(o[3]=0),o}return[0,0,0,0]},getContext:function(t){let{canvas:e,context:i}=t;return e&&i?(i.clearRect(0,0,e.width,e.height),i):(t.canvas=c.createElement("canvas"),t.context=t.canvas.getContext("2d",{willReadFrequently:!0})||void 0,t.context)}},{seriesTypes:{map:w}}=p(),{addEvent:v,error:D,extend:C,isNumber:j,isObject:P,merge:O,pick:I}=s();function T(t){return t-360*Math.floor((t+180)/360)}class z extends w{constructor(){super(...arguments),this.isDirtyCanvas=!0}update(){this.options=O(this.options,arguments[0]),this.getInterpolation().enabled&&(this.isDirtyCanvas=!0,this.points.forEach(t=>{t.graphic&&(t.graphic.destroy(),delete t.graphic)})),super.update.apply(this,arguments)}translate(){(!this.getInterpolation().enabled||!this.image||this.isDirty||this.isDirtyData)&&super.translate.apply(this,arguments)}getInterpolation(){return P(this.options.interpolation)?this.options.interpolation:{blur:1,enabled:this.options.interpolation}}drawPoints(){let t=this.chart.mapView,e=this.options;if(this.getInterpolation().enabled&&t&&this.bounds){let o=this.context||b(this),{canvas:a,colorAxis:r,image:n,chart:s,points:l}=this,[p,h]=[I(e.colsize,1),I(e.rowsize,1)],d=t.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2}),c=t.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});if(a&&o&&r&&d&&c){let{x:e,y:r}=d,g=c.x-e,u=c.y-r,f={x:e,y:r,width:g,height:u};if(this.isDirtyCanvas||this.isDirtyData||"Orthographic"===t.projection.options.name){let n=a.width=1+~~(360/p),s=a.height=1+~~(180/h),d=new Uint8ClampedArray(n*s*4),{lat:c=0,lon:y=0}=l[0].options,m=y%h!=0,f=c%p!=0,b=m?t=>Math.round(t/h)*h:t=>t,w=f?t=>Math.round(t/p)*p:t=>t,v=l.length;(m||f)&&D("Highcharts Warning: For best performance, lon/lat datapoints should spaced by a single colsize/rowsize",!1,this.chart,{colsize:String(p),rowsize:String(h)}),this.directTouch=!1,this.isDirtyCanvas=!0;for(let t=0;t<v;t++){var i;let e=l[t],{lon:o,lat:a}=e.options;j(o)&&j(a)&&d.set(x(e.value,e),4*(i=b(o),Math.ceil(n*(s-1-(w(a)+90)/h)+(i+180)/p)))}let C=this.getInterpolation().blur,P=0===C?1:11*C,O=~~(n*P),I=~~(s*P),T=~~g,z=~~u,A=new ImageData(d,n,s);a.width=O,a.height=I,o.putImageData(A,0,0),o.globalCompositeOperation="copy",o.drawImage(a,0,0,A.width,A.height,0,0,O,I);let L=this.getProjectedImageData(t,T,z,o.getImageData(0,0,O,I),a,e,r);a.width=T,a.height=z,o.putImageData(new ImageData(L,T,z),0,0)}if(n)if(s.renderer.globalAnimation&&s.hasRendered){let t=Number(n.attr("x")),i=Number(n.attr("y")),o=Number(n.attr("width")),l=Number(n.attr("height")),p=(a,s)=>{let p=s.pos;n.attr({x:t+(e-t)*p,y:i+(r-i)*p,width:o+(g-o)*p,height:l+(u-l)*p})},h=O(y(s.renderer.globalAnimation)),d=h.step;h.step=function(){d&&d.apply(this,arguments),p.apply(this,arguments)},n.attr(O({animator:0},this.isDirtyCanvas?{href:a.toDataURL("image/png",1)}:void 0)).animate({animator:1},h)}else m(n),n.attr(O(f,this.isDirtyCanvas?{href:a.toDataURL("image/png",1)}:void 0));else this.image=s.renderer.image(a.toDataURL("image/png",1)).attr(f).add(this.group);this.isDirtyCanvas=!1}}else super.drawPoints.apply(this,arguments)}getProjectedImageData(t,e,i,o,a,r,n){let s=new Uint8ClampedArray(e*i*4),l=I(t.projection.options.rotation?.[0],0),p=a.width/360,h=-1*a.height/180,d=-1;for(let i=0;i<s.length;i+=4){let c=i/4%e;0===c&&d++;let g=t.pixelsToLonLat({x:r+c,y:n+d});if(g){g.lon>-180-l&&g.lon<180-l&&(g.lon=T(g.lon));let t=[g.lon,g.lat],e=t[0]*p+a.width/2,r=t[1]*h+a.height/2;if(e>=0&&e<=a.width&&r>=0&&r<=a.height){let t=Math.floor(r)*a.width*4+4*Math.round(e);s[i]=o.data[t],s[i+1]=o.data[t+1],s[i+2]=o.data[t+2],s[i+3]=o.data[t+3]}}}return s}searchPoint(t,e){let i=this.chart,o=i.mapView;if(o&&this.bounds&&this.image&&i.tooltip&&i.tooltip.options.enabled)if(!i.pointer.hasDragged&&(.01>=+this.image.attr("animator")||+this.image.attr("animator")>=.99)){let a=o.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2}),r=o.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});if(i.pointer.normalize(t),t.lon&&t.lat&&a&&r&&t.chartX-i.plotLeft>a.x&&t.chartX-i.plotLeft<r.x&&t.chartY-i.plotTop>a.y&&t.chartY-i.plotTop<r.y)return this.searchKDTree({clientX:t.chartX,lon:T(t.lon),lat:t.lat},e,t)}else i.tooltip.destroy()}}z.defaultOptions=O(w.defaultOptions,{nullColor:"transparent",tooltip:{pointFormat:"Lat: {point.lat}, Lon: {point.lon}, Value: {point.value}<br/>"},borderWidth:0,colsize:1,rowsize:1,stickyTracking:!0,interpolation:{enabled:!1,blur:1}}),v(z,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0,this.drawPoints()}),C(z.prototype,{type:"geoheatmap",applyJitter:f,pointClass:class extends h{applyOptions(t,e){let i=super.applyOptions.call(this,t,e),{lat:o,lon:a}=i.options;if(d(a)&&d(o)){let{colsize:t=1,rowsize:e=1}=this.series.options,r=a-t/2,n=o-e/2;i.geometry=i.options.geometry={type:"Polygon",coordinates:[[[r,n],[r+t,n],[r+t,n+e],[r,n+e],[r,n]]]}}return i}},pointArrayMap:["lon","lat","value"],kdAxisArray:["lon","lat"]}),p().registerSeriesType("geoheatmap",z);let A=s();return r.default})())(a._Highcharts,a._Highcharts.SeriesRegistry)),n=e({__proto__:null,default:t(r)},[r]);export{n as g};
//# sourceMappingURL=geoheatmap-BUYmyRse.js.map

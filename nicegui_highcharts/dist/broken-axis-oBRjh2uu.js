import{g as t}from"./index-B1MHyEgd.js";function e(t,e){return e.forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(i){if("default"!==i&&!(i in t)){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}})}),Object.freeze(t)}var i,r={exports:{}};var s,n=i?r.exports:(i=1,s="undefined"==typeof window?r.exports:window,r.exports=((t,e)=>(()=>{var i,r={184:t=>{t.exports=e},944:e=>{e.exports=t}},s={};function n(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={exports:{}};return r[t](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o={};n.d(o,{default:()=>v});var a=n(944),f=n.n(a),l=n(184),h=n.n(l);let{addEvent:c,find:u,fireEvent:k,isArray:p,isNumber:x,pick:m}=f();!function(t){function e(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function i(){Object.keys(this.options.breaks?.[0]||{}).length&&(this.options.ordinal=!1)}function r(){let t=this.brokenAxis;if(t?.hasBreaks){let e=this.tickPositions,i=this.tickPositions.info,r=[];for(let i=0;i<e.length;i++)t.isInAnyBreak(e[i])||r.push(e[i]);this.tickPositions=r,this.tickPositions.info=i}}function s(){this.brokenAxis||(this.brokenAxis=new l(this))}function n(){let{isDirty:t,options:{connectNulls:e},points:i,xAxis:r,yAxis:s}=this;if(t){let t=i.length;for(;t--;){let n=i[t],o=(null!==n.y||!1!==e)&&(r?.brokenAxis?.isInAnyBreak(n.x,!0)||s?.brokenAxis?.isInAnyBreak(n.y,!0));n.visible=!o&&!1!==n.options.visible}}}function o(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,m(this.pointArrayMap,["y"]))}function a(t,e){let i,r,s,n=this,o=n.points;if(t?.brokenAxis?.hasBreaks){let a=t.brokenAxis;e.forEach(function(e){i=a?.breakArray||[],r=t.isXAxis?t.min:m(n.options.threshold,t.min),o.forEach(function(n){s=n["stack"+e.toUpperCase()]??n[e],i.forEach(function(e){if(x(r)&&x(s)){let i="";r<e.from&&s>e.to||r>e.from&&s<e.from?i="pointBreak":(r<e.from&&s>e.from&&s<e.to||r>e.from&&s>e.to&&s<e.from)&&(i="pointInBreak"),i&&k(t,i,{point:n,brk:e})}})})})}}function f(){let t=this.currentDataGrouping,e=t?.gapSize,i=this.points.slice(),r=this.yAxis,s=this.options.gapSize,n=i.length-1;if(s&&n>0){let t,o;for("value"!==this.options.gapUnit&&(s*=this.basePointRange),e&&e>s&&e>=this.basePointRange&&(s=e);n--;)if(o&&!1!==o.visible||(o=i[n+1]),t=i[n],!1!==o.visible&&!1!==t.visible){if(o.x-t.x>s){let e=(t.x+o.x)/2;i.splice(n+1,0,{isNull:!0,x:e}),r.stacking&&this.options.stacking&&((r.stacking.stacks[this.stackKey][e]=new(h())(r,r.options.stackLabels,!1,e,this.stack)).total=0)}o=t}}return this.getGraphPath(i)}t.compose=function(t,l){if(!t.keepProps.includes("brokenAxis")){t.keepProps.push("brokenAxis"),c(t,"init",s),c(t,"afterInit",e),c(t,"afterSetTickPositions",r),c(t,"afterSetOptions",i);let h=l.prototype;h.drawBreaks=a,h.gappedPath=f,c(l,"afterGeneratePoints",n),c(l,"afterRender",o)}return t};class l{static isInBreak(t,e){let i=t.repeat||1/0,r=t.from,s=t.to-t.from,n=e>=r?(e-r)%i:i-(r-e)%i;return t.inclusive?n<=s:n<s&&0!==n}static lin2Val(t){let e=this.min||0,i=this.brokenAxis,r=i?.breakArray;if(!r?.length||!x(t))return t;let s=t;if(t>e)for(let t of r){if(t.from>s)break;(t.to<=s&&t.to>e||l.isInBreak(t,s))&&(s+=t.len)}else if(t<e)for(let t of r){if(t.from>e)break;(t.from>=s&&t.from<e||l.isInBreak(t,s))&&(s-=t.len)}return s}static val2Lin(t){let e=this.min||0,i=this.brokenAxis,r=i?.breakArray;if(!r?.length||!x(t))return t;let s=t;if(t>e)for(let i of r)if(i.to<=t&&i.to>e)s-=i.len;else{if(i.from>t)break;if(l.isInBreak(i,t)){s-=t-i.from;break}}else if(t<e)for(let i of r)if(i.from>=t&&i.from<e)s+=i.len;else{if(i.from>e)break;if(l.isInBreak(i,t)){s+=i.to-t;break}}return s}constructor(t){this.axis=t}findBreakAt(t,e){return u(e,function(e){return e.from<t&&t<e.to})}isInAnyBreak(t,e){let i,r,s,n=this.axis,o=n.options.breaks||[],a=o.length;if(a&&x(t)){for(;a--;)l.isInBreak(o[a],t)&&(i=!0,r||(r=m(o[a].showPoints,!n.isXAxis)));s=i&&e?i&&!r:i}return s}setBreaks(t,e){let i=this,r=i.axis,s=r.chart.time,n=p(t)&&!!Object.keys(t?.[0]||{}).length;r.isDirty=(i.hasBreaks??!1)!==n,i.hasBreaks=n,t?.forEach(t=>{t.from=s.parse(t.from)||0,t.to=s.parse(t.to)||0}),t!==r.options.breaks&&(r.options.breaks=r.userOptions.breaks=t),r.forceRedraw=!0,r.series.forEach(function(t){t.isDirty=!0}),n||r.val2lin!==l.val2Lin||(delete r.val2lin,delete r.lin2val),n&&(r.userOptions.ordinal=!1,r.lin2val=l.lin2Val,r.val2lin=l.val2Lin,r.setExtremes=function(t,e,s,n,o){if(i.hasBreaks&&!r.treeGrid?.tree){let r,s=this.brokenAxis.breakArray||[];for(;r=i.findBreakAt(t,s);)t=r.to;for(;r=i.findBreakAt(e,s);)e=r.from;e<t&&(e=t)}r.constructor.prototype.setExtremes.call(this,t,e,s,n,o)},r.setAxisTranslation=function(){if(r.constructor.prototype.setAxisTranslation.call(this),i.unitLength=void 0,i.hasBreaks){let t,e,s,n,o=r.options.breaks||[],a=[],f=[],h=r.pointRangePadding??0,c=0,u=r.userMin??r.min,p=r.userMax??r.max,m=r.dataMin??u,b=r.dataMax??p;x(r.threshold)&&(m=Math.min(m??r.threshold,r.threshold),b=Math.max(b??r.threshold,r.threshold)),r.treeGrid?.tree||o.forEach(function(t){e=t.repeat||1/0,x(u)&&x(p)&&(l.isInBreak(t,u)&&(u+=t.to%e-u%e),l.isInBreak(t,p)&&(p-=p%e-t.from%e))}),x(m)&&x(b)&&o.forEach(function(t){for(s=t.from,e=t.repeat||1/0;s-e>m;)s-=e;for(;s<m;)s+=e;for(n=s;n<b;n+=e)a.push({value:n,move:"in"}),a.push({value:n+t.to-t.from,move:"out",size:t.breakSize})}),a.sort(function(t,e){return t.value===e.value?("in"!==t.move)-("in"!==e.move):t.value-e.value}),t=0,s=m,a.forEach(e=>{1===(t+="in"===e.move?1:-1)&&"in"===e.move&&(s=e.value),0===t&&x(s)&&(f.push({from:s,to:e.value,len:e.value-s-(e.size||0)}),x(u)&&x(p)&&s<p&&e.value>u&&(c+=e.value-s-(e.size||0)))}),i.breakArray=f,x(u)&&x(p)&&x(r.min)&&(i.unitLength=p-u-c+h,k(r,"afterBreaks"),r.staticScale?r.transA=r.staticScale:i.unitLength&&(r.transA*=(p-r.min+h)/i.unitLength),h&&(r.minPixelPadding=r.transA*(r.minPointOffset||0)),r.min=u,r.max=p)}}),m(e,!0)&&r.chart.redraw()}}t.Additions=l}(i||(i={}));let b=i,d=f();d.BrokenAxis=d.BrokenAxis||b,d.BrokenAxis.compose(d.Axis,d.Series);let v=f();return o.default})())(s._Highcharts,s._Highcharts.StackItem)),o=e({__proto__:null,default:t(n)},[n]);export{o as b};
//# sourceMappingURL=broken-axis-oBRjh2uu.js.map

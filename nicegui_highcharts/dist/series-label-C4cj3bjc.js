import{g as t}from"./index-B1MHyEgd.js";function e(t,e){return e.forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in t)){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(t)}var r,o={exports:{}};var a,i=r?o.exports:(r=1,a="undefined"==typeof window?o.exports:window,o.exports=((t,e)=>(()=>{var r={944:e=>{e.exports=t},984:t=>{t.exports=e}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return r[t](i,i.exports,a),i.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};a.d(i,{default:()=>E});var n=a(944),h=a.n(n),l=a(984),s=a.n(l);let c={enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]};function p(t,e,r,o,a,i){let n=(i-e)*(r-t)-(o-e)*(a-t);return n>0||!(n<0)}function d(t,e,r,o,a,i,n,h){return p(t,e,a,i,n,h)!==p(r,o,a,i,n,h)&&p(t,e,r,o,a,i)!==p(t,e,r,o,n,h)}let{animObject:f}=h(),{format:u}=s(),{setOptions:x}=h(),{composed:b}=h(),{boxIntersectLine:g,intersectRect:m}={boxIntersectLine:function(t,e,r,o,a,i,n,h){return d(t,e,t+r,e,a,i,n,h)||d(t+r,e,t+r,e+o,a,i,n,h)||d(t,e+o,t+r,e+o,a,i,n,h)||d(t,e,t,e+o,a,i,n,h)},intersectRect:function(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}},{addEvent:y,extend:X,fireEvent:w,isNumber:Y,pick:M,pushUnique:A,syncTimeout:S}=h();function v(t,e,r,o,a){let i,n,h,l,s,c,p,d=t.chart,f=t.options.label||{},u=M(f.onArea,!!t.area),x=u||f.connectorAllowed,b=d.boxesToAvoid,y=Number.MAX_VALUE,X=Number.MAX_VALUE;for(c=0;b&&c<b.length;c+=1)if(m(b[c],{left:e,right:e+o.width,top:r,bottom:r+o.height}))return!1;for(c=0;c<d.series.length;c+=1){let b=d.series[c],m=b.interpolatedPoints&&[...b.interpolatedPoints];if(b.visible&&m){let c=d.plotHeight/10;for(let t=d.plotTop;t<=d.plotTop+d.plotHeight;t+=c)m.unshift({chartX:d.plotLeft,chartY:t}),m.push({chartX:d.plotLeft+d.plotWidth,chartY:t});for(p=1;p<m.length;p+=1){if(m[p].chartX>=e-16&&m[p-1].chartX<=e+o.width+16){if(g(e,r,o.width,o.height,m[p-1].chartX,m[p-1].chartY,m[p].chartX,m[p].chartY))return!1;t===b&&!h&&a&&(h=g(e-16,r-16,o.width+32,o.height+32,m[p-1].chartX,m[p-1].chartY,m[p].chartX,m[p].chartY))}(x||h)&&(t!==b||u)&&(y=Math.min(y,(l=e+o.width/2-m[p].chartX)*l+(s=r+o.height/2-m[p].chartY)*s))}if(!u&&x&&t===b&&(a&&!h||y<Math.pow(f.connectorNeighbourDistance||1,2))){for(p=1;p<m.length;p+=1)(i=Math.min(Math.pow(e+o.width/2-m[p].chartX,2)+Math.pow(r+o.height/2-m[p].chartY,2),Math.pow(e-m[p].chartX,2)+Math.pow(r-m[p].chartY,2),Math.pow(e+o.width-m[p].chartX,2)+Math.pow(r-m[p].chartY,2),Math.pow(e+o.width-m[p].chartX,2)+Math.pow(r+o.height-m[p].chartY,2),Math.pow(e-m[p].chartX,2)+Math.pow(r+o.height-m[p].chartY,2)))<X&&(X=i,n=m[p]);h=!0}}}return(!a||!!h)&&{x:e,y:r,weight:y-(n?X:0),connectorPoint:n}}function L(t){if(this.renderer){let e=this,r=f(e.renderer.globalAnimation).duration;e.labelSeries=[],e.labelSeriesMaxSum=0,e.seriesLabelTimer&&h().clearTimeout(e.seriesLabelTimer),e.series.forEach(function(o){let a=o.options.label||{},i=o.labelBySeries,n=i&&i.closest,h=o.getColumn("y");a.enabled&&o.visible&&(o.graph||o.area)&&!o.boosted&&e.labelSeries&&(e.labelSeries.push(o),a.minFontSize&&a.maxFontSize&&h.length&&(o.sum=h.reduce((t,e)=>(t||0)+(e||0),0),e.labelSeriesMaxSum=Math.max(e.labelSeriesMaxSum||0,o.sum||0)),"load"===t.type&&(r=Math.max(r,f(o.options.animation).duration)),n&&(void 0!==n[0].plotX?i.animate({x:n[0].plotX+n[1],y:n[0].plotY+n[2]}):i.attr({opacity:0})))}),e.seriesLabelTimer=S(function(){e.series&&e.labelSeries&&function(t){t.boxesToAvoid=[];let e=t.labelSeries||[],r=t.boxesToAvoid;t.series.forEach(t=>(t.points||[]).forEach(e=>(e.dataLabels||[]).forEach(e=>{let{width:o,height:a}=e.getBBox(),i=(e.translateX||0)+(t.xAxis?t.xAxis.pos:t.chart.plotLeft),n=(e.translateY||0)+(t.yAxis?t.yAxis.pos:t.chart.plotTop);r.push({left:i,top:n,right:i+o,bottom:n+a})}))),e.forEach(function(t){let e=t.options.label||{};t.interpolatedPoints=function(t){let e,r,o,a,i;if(!t.xAxis&&!t.yAxis)return;let n=t.points,h=[],l=t.graph||t.area,s=l&&l.element,c=t.chart.inverted,p=t.xAxis,d=t.yAxis,f=c?d.pos:p.pos,u=c?p.pos:d.pos,x=c?p.len:d.len,b=c?d.len:p.len,g=M((t.options.label||{}).onArea,!!t.area),m=d.getThreshold(t.options.threshold),y={},X=c?"chartCenterX":"chartCenterY";function w(t){let e=Math.round((t.plotX||0)/8)+","+Math.round((t.plotY||0)/8);y[e]||(y[e]=1,h.push(t))}if(t.getPointSpline&&s&&s.getPointAtLength&&!g&&n.length<(t.chart.plotSizeX||0)/16){let t=l.toD&&l.attr("d");for(l.toD&&l.attr({d:l.toD}),o=s.getTotalLength(),e=0;e<o;e+=16){let t=s.getPointAtLength(e),r=c?b-t.y:t.x,o=c?x-t.x:t.y;w({chartX:f+r,chartY:u+o,plotX:r,plotY:o})}t&&l.attr({d:t});let r=n[n.length-1].pos();w({chartX:f+(r?.[0]||0),chartY:u+(r?.[1]||0)})}else{let t;for(e=0,o=n.length;e<o;e+=1){let o=n[e],[h,l]=o.pos()||[],{plotHigh:s}=o;if(Y(h)&&Y(l)){let e={plotX:h,plotY:l,chartX:f+h,chartY:u+l};if(g&&(s&&(e.plotY=s,e.chartY=u+s),c?e.chartCenterX=f+b-((s||o.plotY||0)+M(o.yBottom,m))/2:e.chartCenterY=u+((s||l)+M(o.yBottom,m))/2),t&&(r=Math.max(Math.abs(e.chartX-t.chartX),Math.abs(e.chartY-t.chartY)))>16&&r<999)for(i=1,a=Math.ceil(r/16);i<a;i+=1)w({chartX:t.chartX+(e.chartX-t.chartX)*(i/a),chartY:t.chartY+(e.chartY-t.chartY)*(i/a),[X]:(t[X]||0)+((e[X]||0)-(t[X]||0))*(i/a),plotX:(t.plotX||0)+(h-(t.plotX||0))*(i/a),plotY:(t.plotY||0)+(l-(t.plotY||0))*(i/a)});w(e),t=e}}}return h}(t),r.push(...e.boxesToAvoid||[])}),t.series.forEach(function(e){let r=e.options.label;if(!r||!e.xAxis&&!e.yAxis)return;let o,a,i,n,h,l,s,c,p,d="highcharts-color-"+M(e.colorIndex,"none"),x=!e.labelBySeries,b=r.minFontSize,g=r.maxFontSize,m=t.inverted,y=m?e.yAxis.pos:e.xAxis.pos,w=m?e.xAxis.pos:e.yAxis.pos,Y=t.inverted?e.yAxis.len:e.xAxis.len,A=t.inverted?e.xAxis.len:e.yAxis.len,S=e.interpolatedPoints,L=M(r.onArea,!!e.area),T=[],P=e.getColumn("x"),E=e.labelBySeries;function B(t,e,r){let o=Math.max(y,M(c,-1/0)),a=Math.min(y+Y,M(p,1/0));return t>o&&t<=a-r.width&&e>=w&&e<=w+A-r.height}function z(){E&&(e.labelBySeries=E.destroy())}if(L&&!m&&(s=[e.xAxis.toPixels(P[0]),e.xAxis.toPixels(P[P.length-1])],c=Math.min.apply(Math,s),p=Math.max.apply(Math,s)),e.visible&&!e.boosted&&S){if(!E){var C,O,_;let o=e.name;if("string"==typeof r.format?o=u(r.format,e,t):r.formatter&&(o=r.formatter.call(e)),e.labelBySeries=E=t.renderer.label(o,0,0,"connector",0,0,r.useHTML).addClass("highcharts-series-label highcharts-series-label-"+e.index+" "+(e.options.className||"")+" "+d),!t.renderer.styledMode){let o="string"==typeof e.color?e.color:"#666666";E.css(X({color:L?t.renderer.getContrast(o):o},r.style||{})),E.attr({opacity:+!!t.renderer.forExport,stroke:e.color,"stroke-width":1})}b&&g&&E.css({fontSize:(C=e,O=b,_=g,O+(C.sum||0)/(C.chart.labelSeriesMaxSum||0)*(_-O)+"px")}),E.attr({padding:0,zIndex:3}).add()}for((o=E.getBBox()).width=Math.round(o.width),h=S.length-1;h>0;h-=1)L?B(a=(S[h].chartCenterX??S[h].chartX)-o.width/2,i=(S[h].chartCenterY??S[h].chartY)-o.height/2,o)&&(l=v(e,a,i,o)):(B(a=S[h].chartX+3,i=S[h].chartY-o.height-3,o)&&(l=v(e,a,i,o,!0)),l&&T.push(l),B(a=S[h].chartX+3,i=S[h].chartY+3,o)&&(l=v(e,a,i,o,!0)),l&&T.push(l),B(a=S[h].chartX-o.width-3,i=S[h].chartY+3,o)&&(l=v(e,a,i,o,!0)),l&&T.push(l),B(a=S[h].chartX-o.width-3,i=S[h].chartY-o.height-3,o)&&(l=v(e,a,i,o,!0))),l&&T.push(l);if(r.connectorAllowed&&!T.length&&!L)for(a=y+Y-o.width;a>=y;a-=16)for(i=w;i<w+A-o.height;i+=16)(n=v(e,a,i,o,!0))&&T.push(n);if(T.length){T.sort((t,e)=>e.weight-t.weight),l=T[0],(t.boxesToAvoid||[]).push({left:l.x,right:l.x+o.width,top:l.y,bottom:l.y+o.height});let r=Math.sqrt(Math.pow(Math.abs(l.x-(E.x||0)),2)+Math.pow(Math.abs(l.y-(E.y||0)),2));if(r&&e.labelBySeries){let o,a={opacity:+!!t.renderer.forExport,x:l.x,y:l.y},i={opacity:1};r<=10&&(i={x:a.x,y:a.y},a={}),x&&(o=f(e.options.animation),o.duration*=.2),e.labelBySeries.attr(X(a,{anchorX:l.connectorPoint&&(l.connectorPoint.plotX||0)+y,anchorY:l.connectorPoint&&(l.connectorPoint.plotY||0)+w})).animate(i,o),e.options.kdNow=!0,e.buildKDTree();let n=e.searchPoint({chartX:l.x,chartY:l.y},!0);n&&(E.closest=[n,l.x-(n.plotX||0),l.y-(n.plotY||0)])}}else z()}else z()}),w(t,"afterDrawSeriesLabels")}(e)},e.renderer.forExport||!r?0:r)}}function T(t,e,r,o,a){let i,n,h=a&&a.anchorX,l=a&&a.anchorY,s=r/2;return Y(h)&&Y(l)&&(i=[["M",h,l]],(n=e-l)<0&&(n=-o-n),n<r&&(s=h<t+r/2?n:r-n),l>e+o?i.push(["L",t+s,e+o]):l<e?i.push(["L",t+s,e]):h<t?i.push(["L",t,e+o/2]):h>t+r&&i.push(["L",t+r,e+o/2])),i||[]}let P=h();!function(t,e){A(b,"SeriesLabel")&&(y(t,"load",L),y(t,"redraw",L),e.prototype.symbols.connector=T,x({plotOptions:{series:{label:c}}}))}(P.Chart,P.SVGRenderer);let E=h();return i.default})())(a._Highcharts,a._Highcharts.Templating)),n=e({__proto__:null,default:t(i)},[i]);export{n as s};
//# sourceMappingURL=series-label-C4cj3bjc.js.map
